<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./Loanding/Loanding.css" />
    <link rel="stylesheet" href="./reset.css" />
    <link rel="stylesheet" href="./pag.oferta.css" />
    <link rel="icon" href="./Imagem/logo jornal.png">
    <title>Igreja Reino dos C√©us</title>
  </head>
  <body>
    <!-- Loanding-->
    <div class="preloader" id="preloader">
      <div class="loader" id="loader"></div>
    </div>

    <header>
      <div id="header"></div>
      <script>
        async function loadPart(id, file) {
          const res = await fetch(file);
          const html = await res.text();
          document.getElementById(id).innerHTML = html;
        }
        loadPart("header", "haader,footer-principal/header.html");
        loadPart("footer", "haader,footer-principal/footer.html");
      </script>
    </header>

    <main>
      <section class="oferta">
        <div class="icon-top">
          <i class='bx bxs-dove' style="font-size: 3rem; color: #00095b;"></i>
        </div>

        <div class="logodoreino">
          <img src="./Imagem/LOGO - REINO DOS CEUS.png" alt="Logo Reino dos C√©us" />
        </div>

        <div class="itensbaixos">
          <div class="container">
            <h1>Seja um provedor do <span class="highlight">Monte Maanaim</span></h1>
            
            <div class="qr-section">
              <div class="qr-wrapper">
                <img
                  src="./Imagem/Link_pra_pagina_principal_da_Wikipedia-PT_em_codigo_QR_b.svg"
                  alt="QR Code para PIX"
                  class="qr-code"
                />
                <div class="qr-border"></div>
              </div>
            </div>

            <div class="instruction-box">
              <i class='bx bx-qr-scan' style="font-size: 1.5rem; margin-right: 10px;"></i>
              <span>Abra o aplicativo do seu banco, aponte a c√¢mera do seu celular para o QR-CODE e d√™ a sua oferta.</span>
            </div>

            <div class="info-section">
              <div class="info-card">
                <i class='bx bx-heart-circle' style="font-size: 2rem; color: #cf0000; margin-bottom: 15px;"></i>
                <p>
                  <strong>Nos ajude a manter esta obra grandiosa de Deus.</strong> Seja um provedor da Casa de Deus!
                </p>
                <p>
                  Envie a sua oferta ou o seu d√≠zimo diretamente na conta do Altar do Monte Maanaim.
                </p>
              </div>

              <div class="pix-info">
                <div class="pix-badge">
                  <i class='bx bx-transfer' style="font-size: 1.5rem;"></i>
                  <span>PIX</span>
                </div>
                <p class="pix-cnpj">
                  <strong>CNPJ:</strong> <span id="cnpjText">28.135.774/0001-49</span>
                </p>
                <button class="copy-button" id="copyCnpjBtn" type="button" onclick="copyCnpj(event)">
                  <i class='bx bx-copy'></i>
                  <span>Copiar CNPJ</span>
                </button>
              </div>
            </div>

            <div class="versiculo-box">
              <i class='bx bxs-book-open' style="font-size: 1.8rem; color: #00095b; margin-bottom: 15px;"></i>
              <p class="versiculo-text">
                <strong>Diz a Palavra de Deus:</strong> "Cada um d√™ conforme determinou em seu cora√ß√£o, n√£o com pesar ou por obriga√ß√£o, pois Deus ama quem d√° com alegria."
              </p>
              <p class="versiculo-reference">(2 Cor√≠ntios 9:7)</p>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <div id="footer"></div>
    </footer>

    <script src="./Loanding/Loanding.js"></script>
    
    <script>
      // CNPJ a ser copiado
      const CNPJ_VALUE = '28.135.774/0001-49';

      // Fun√ß√£o para copiar CNPJ (dispon√≠vel globalmente)
      window.copyCnpj = function(event) {
        // Prevenir comportamento padr√£o
        if (event) {
          event.preventDefault();
          event.stopPropagation();
        }

        const button = document.getElementById('copyCnpjBtn');
        const span = button ? button.querySelector('span') : null;
        const icon = button ? button.querySelector('i') : null;
        
        console.log('üîµ Iniciando c√≥pia do CNPJ:', CNPJ_VALUE);
        console.log('üîµ Bot√£o encontrado:', button);

        // Fun√ß√£o para atualizar feedback visual
        function showSuccess() {
          if (button && span) {
            const originalText = span.textContent;
            span.textContent = 'Copiado!';
            button.classList.add('copied');
            if (icon) {
              icon.className = 'bx bx-check';
            }
            setTimeout(() => {
              span.textContent = originalText;
              button.classList.remove('copied');
              if (icon) {
                icon.className = 'bx bx-copy';
              }
            }, 3000);
          }
        }

        // Fun√ß√£o fallback para copiar
        function copyUsingFallback() {
          try {
            const textArea = document.createElement('textarea');
            textArea.value = CNPJ_VALUE;
            textArea.style.position = 'fixed';
            textArea.style.top = '0';
            textArea.style.left = '0';
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            textArea.style.padding = '0';
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            textArea.style.background = 'transparent';
            textArea.style.opacity = '0';
            textArea.style.zIndex = '-9999';
            textArea.style.pointerEvents = 'none';
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            // Para dispositivos m√≥veis iOS
            if (navigator.userAgent.match(/ipad|iphone/i)) {
              const range = document.createRange();
              range.selectNodeContents(textArea);
              const selection = window.getSelection();
              selection.removeAllRanges();
              selection.addRange(range);
              textArea.setSelectionRange(0, 999999);
            } else {
              textArea.select();
            }
            
            const successful = document.execCommand('copy');
            document.body.removeChild(textArea);
            
            if (successful) {
              console.log('‚úÖ CNPJ copiado usando m√©todo alternativo!');
              showSuccess();
              return true;
            } else {
              throw new Error('execCommand retornou false');
            }
          } catch (err) {
            console.error('‚ùå Erro ao copiar com fallback:', err);
            // √öltimo recurso: mostrar o CNPJ para copiar manualmente
            alert('CNPJ: ' + CNPJ_VALUE + '\n\nPor favor, copie manualmente o c√≥digo acima.');
            
            // Tentar selecionar o texto na tela
            try {
              const cnpjSpan = document.getElementById('cnpjText');
              if (cnpjSpan) {
                const range = document.createRange();
                range.selectNodeContents(cnpjSpan);
                const selection = window.getSelection();
                selection.removeAllRanges();
                selection.addRange(range);
              }
            } catch (e) {
              console.error('N√£o foi poss√≠vel selecionar o texto:', e);
            }
            return false;
          }
        }

        // Tentar m√©todo moderno primeiro
        if (navigator.clipboard && navigator.clipboard.writeText) {
          navigator.clipboard.writeText(CNPJ_VALUE)
            .then(() => {
              console.log('‚úÖ CNPJ copiado com sucesso usando Clipboard API!');
              showSuccess();
            })
            .catch(err => {
              console.error('‚ùå Erro com Clipboard API:', err);
              console.log('üìã Tentando m√©todo alternativo...');
              copyUsingFallback();
            });
        } else {
          console.log('üìã Clipboard API n√£o dispon√≠vel, usando m√©todo alternativo');
          copyUsingFallback();
        }
      }

      // Configurar evento quando a p√°gina carregar (backup)
      function initCopyButton() {
        const copyButton = document.getElementById('copyCnpjBtn');
        if (copyButton) {
          // Remover listeners anteriores se houver
          const newButton = copyButton.cloneNode(true);
          copyButton.parentNode.replaceChild(newButton, copyButton);
          
          // Adicionar novo listener
          const btn = document.getElementById('copyCnpjBtn');
          if (btn) {
            btn.addEventListener('click', function(e) {
              e.preventDefault();
              e.stopPropagation();
              if (window.copyCnpj) {
                window.copyCnpj(e);
              }
            });
            console.log('‚úÖ Event listener configurado no bot√£o!');
          }
        } else {
          console.warn('‚ö†Ô∏è Bot√£o n√£o encontrado ainda, tentando novamente...');
          setTimeout(initCopyButton, 300);
        }
      }

      // Inicializar quando o DOM estiver pronto
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
          initCopyButton();
          console.log('‚úÖ DOM carregado, bot√£o configurado');
        });
      } else {
        initCopyButton();
        console.log('‚úÖ DOM j√° carregado, bot√£o configurado imediatamente');
      }

      // Tamb√©m tentar ap√≥s load completo (garantia extra)
      window.addEventListener('load', function() {
        setTimeout(function() {
          initCopyButton();
          console.log('‚úÖ P√°gina totalmente carregada, verificando bot√£o');
        }, 200);
      });
    </script>
  </body>
</html>
