<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Jornal Reino dos C√©us</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
    <style>
        /* Estilos cr√≠ticos para garantir que os cards apare√ßam */
        .jornal-card {
            display: flex !important;
            visibility: visible !important;
            opacity: 1 !important;
            background: #ffffff !important;
            border-radius: 16px !important;
        }
        .jornais-grid {
            display: grid !important;
            grid-template-columns: repeat(auto-fill, minmax(340px, 1fr)) !important;
            gap: 28px !important;
        }
    </style>
    <script>
        // Suprimir erros de arquivos que n√£o pertencem ao dashboard
        const originalError = console.error;
        console.error = function(...args) {
            const message = args.join(' ');
            if (
                message.includes('gsap.min.js') ||
                message.includes('style_efeitos.js') ||
                message.includes('materia-jornal') ||
                message.includes('MIME type') ||
                message.includes('Refused to execute script')
            ) {
                // Ignorar esses erros
                return;
            }
            originalError.apply(console, args);
        };
        
        // Carregar CSS com timestamp para evitar cache
        const cssLink = document.createElement('link');
        cssLink.rel = 'stylesheet';
        cssLink.href = `/css/style.css?v=4.0&t=${Date.now()}`;
        document.head.appendChild(cssLink);
        
        // Log para verificar se os estilos est√£o carregando
        cssLink.onload = () => console.log('‚úÖ CSS carregado com sucesso!');
        cssLink.onerror = () => console.error('‚ùå Erro ao carregar CSS!');
    </script>
</head>
<body>
    <div id="app">
        <!-- Tela de Login -->
        <div id="loginScreen" class="screen">
            <div class="login-container">
                <h1>Dashboard Admin</h1>
                <h2>Jornal Reino dos C√©us</h2>
                <form id="loginForm" onsubmit="event.preventDefault(); return false;">
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" autocomplete="email" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Senha</label>
                        <input type="password" id="password" name="password" autocomplete="current-password" required>
                    </div>
                    <button type="button" id="loginSubmitBtn" class="btn btn-primary" onclick="(function() { if(typeof window.handleLogin === 'function') { window.handleLogin(event); } else if(typeof handleLogin === 'function') { window.handleLogin = handleLogin; window.handleLogin(event); } else { console.error('handleLogin n√£o est√° dispon√≠vel! Tentando novamente em 200ms...'); setTimeout(function() { if(typeof window.handleLogin === 'function') { window.handleLogin(event); } else if(typeof handleLogin === 'function') { window.handleLogin = handleLogin; window.handleLogin(event); } else { alert('Erro: Fun√ß√£o de login n√£o carregada. Por favor, recarregue a p√°gina (Ctrl+F5).'); } }, 200); } })();">Entrar</button>
                    <div id="loginError" class="error-message"></div>
                </form>
            </div>
        </div>

        <!-- Dashboard Principal -->
        <div id="dashboardScreen" class="screen hidden">
            <header class="dashboard-header">
                <h1>Dashboard - Gerenciamento de Jornais</h1>
                <div class="header-actions">
                    <span id="userName"></span>
                    <button id="logoutBtn" class="btn btn-secondary">Sair</button>
                </div>
            </header>

            <main class="dashboard-main">
                <div class="dashboard-tabs">
                    <button class="tab-btn active" data-tab="jornais">Jornais</button>
                    <button class="tab-btn" data-tab="carrossel">Carrossel</button>
                    <button class="tab-btn" data-tab="carrossel-medio">Carrossel M√©dio</button>
                    <button class="tab-btn" data-tab="video">V√≠deo</button>
                    <button class="tab-btn" data-tab="responsaveis">Respons√°veis</button>
                    <button class="tab-btn" data-tab="faq">FAQ</button>
                    <button class="tab-btn" data-tab="sites">Sites Igreja</button>
                    <button class="tab-btn" data-tab="textos">Textos</button>
                    <button class="tab-btn" data-tab="banner">Banner Modal</button>
                    <button class="tab-btn" data-tab="noticias">Not√≠cias</button>
                    <button class="tab-btn" data-tab="colunistas">Colunistas</button>
                    <button class="tab-btn" data-tab="pagamentos">Pagamentos</button>
                </div>

                <!-- Tab Jornais -->
                <div class="tab-content active" id="tab-jornais">
                    <div class="dashboard-actions">
                        <button id="newJornalBtn" class="btn btn-primary" onclick="if(typeof openJornalModal === 'function') { openJornalModal(); } else { console.error('openJornalModal n√£o est√° dispon√≠vel!'); alert('Erro: Fun√ß√£o n√£o dispon√≠vel. Recarregue a p√°gina.'); }">+ Novo Jornal</button>
                    </div>
                    <div id="jornaisList" class="jornais-grid"></div>
                </div>

                <!-- Tab Carrossel -->
                <div class="tab-content" id="tab-carrossel">
                    <div class="dashboard-actions">
                        <button id="newCarrosselBtn" class="btn btn-primary" onclick="if(typeof window.openCarrosselModal === 'function') { window.openCarrosselModal(); } else { console.error('openCarrosselModal n√£o est√° dispon√≠vel!'); alert('Erro: Fun√ß√£o n√£o dispon√≠vel. Recarregue a p√°gina.'); }">+ Novo Item</button>
                    </div>
                    <div id="carrosselList" class="jornais-grid"></div>
                </div>

                <!-- Tab Carrossel M√©dio -->
                <div class="tab-content" id="tab-carrossel-medio">
                    <div class="dashboard-actions">
                        <button id="newCarrosselMedioBtn" class="btn btn-primary" onclick="if(typeof window.openCarrosselMedioModal === 'function') { window.openCarrosselMedioModal(); } else { console.error('openCarrosselMedioModal n√£o est√° dispon√≠vel!'); alert('Erro: Fun√ß√£o n√£o dispon√≠vel. Recarregue a p√°gina.'); }">+ Novo Item</button>
                    </div>
                    <div id="carrosselMedioList" class="jornais-grid"></div>
                </div>

                <!-- Tab V√≠deo -->
                <div class="tab-content" id="tab-video">
                    <div id="videoConfig" class="config-section"></div>
                </div>

                <!-- Tab Respons√°veis -->
                <div class="tab-content" id="tab-responsaveis">
                    <div class="dashboard-actions">
                        <button id="newResponsavelBtn" class="btn btn-primary" onclick="if(typeof window.openResponsavelModal === 'function') { window.openResponsavelModal(); } else { console.error('openResponsavelModal n√£o est√° dispon√≠vel!'); alert('Erro: Fun√ß√£o n√£o dispon√≠vel. Recarregue a p√°gina.'); }">+ Novo Respons√°vel</button>
                    </div>
                    <div id="responsaveisList" class="jornais-grid"></div>
                </div>

                <!-- Tab FAQ -->
                <div class="tab-content" id="tab-faq">
                    <div class="dashboard-actions">
                        <button id="newFaqBtn" class="btn btn-primary" onclick="if(typeof window.openFaqModal === 'function') { window.openFaqModal(); } else { console.error('openFaqModal n√£o est√° dispon√≠vel!'); alert('Erro: Fun√ß√£o n√£o dispon√≠vel. Recarregue a p√°gina.'); }">+ Nova Pergunta</button>
                    </div>
                    <div id="faqList"></div>
                </div>

                <!-- Tab Sites -->
                <div class="tab-content" id="tab-sites">
                    <div class="dashboard-actions">
                        <button id="newSiteBtn" class="btn btn-primary" onclick="if(typeof window.openSiteModal === 'function') { window.openSiteModal(); } else { console.error('openSiteModal n√£o est√° dispon√≠vel!'); alert('Erro: Fun√ß√£o n√£o dispon√≠vel. Recarregue a p√°gina.'); }">+ Novo Site</button>
                    </div>
                    <div id="sitesList" class="jornais-grid"></div>
                </div>

                <!-- Tab Textos -->
                <div class="tab-content" id="tab-textos">
                    <div id="textosConfig" class="config-section"></div>
                </div>

                <!-- Tab Banner -->
                <div class="tab-content" id="tab-banner">
                    <div id="bannerConfig" class="config-section"></div>
                </div>

                <!-- Tab Not√≠cias -->
                <div class="tab-content" id="tab-noticias">
                    <div class="dashboard-actions">
                        <button id="newNoticiaBtn" class="btn btn-primary" onclick="if(typeof window.openNoticiaModal === 'function') { window.openNoticiaModal(); } else { console.error('openNoticiaModal n√£o est√° dispon√≠vel!'); alert('Erro: Fun√ß√£o n√£o dispon√≠vel. Recarregue a p√°gina.'); }">+ Nova Not√≠cia</button>
                    </div>
                    <div id="noticiasList"></div>
                </div>

                <!-- Tab Colunistas -->
                <div class="tab-content" id="tab-colunistas">
                    <div class="dashboard-actions">
                        <button id="newColunistaBtn" class="btn btn-primary" onclick="if(typeof window.openColunistaModal === 'function') { window.openColunistaModal(); } else { console.error('openColunistaModal n√£o est√° dispon√≠vel!'); alert('Erro: Fun√ß√£o n√£o dispon√≠vel. Recarregue a p√°gina.'); }">+ Novo Colunista</button>
                    </div>
                    <div id="colunistasList" class="jornais-grid"></div>
                </div>

                <!-- Tab Pagamentos -->
                <div class="tab-content" id="tab-pagamentos">
                    <div class="dashboard-actions">
                        <button id="updatePaymentValuesBtn" class="btn btn-secondary" onclick="if(typeof window.updatePaymentValues === 'function') { window.updatePaymentValues(); } else { console.error('updatePaymentValues n√£o est√° dispon√≠vel!'); alert('Erro: Fun√ß√£o n√£o dispon√≠vel. Recarregue a p√°gina.'); }">üîÑ Atualizar Valores dos Pagamentos</button>
                    </div>
                    <div id="pagamentosList"></div>
                </div>
            </main>
        </div>
    </div>

    <!-- Modal para Criar/Editar Jornal -->
    <div id="jornalModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Novo Jornal</h2>
                <button type="button" class="modal-close" id="closeModal" onclick="if(typeof closeModal === 'function') { closeModal(); } else if(typeof window.closeModal === 'function') { window.closeModal(); } else { console.error('closeModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('jornalModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">&times;</button>
            </div>
            <form id="jornalForm" onsubmit="event.preventDefault(); if(typeof handleSaveJornal === 'function') { handleSaveJornal(event); } else if(typeof window.handleSaveJornal === 'function') { window.handleSaveJornal(event); } else { console.error('handleSaveJornal n√£o est√° dispon√≠vel!'); } return false;">
                <input type="hidden" id="jornalId">
                
                <div class="form-group">
                    <label for="nome">Nome do Jornal *</label>
                    <input type="text" id="nome" name="nome" required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="mes">M√™s *</label>
                        <input type="text" id="mes" name="mes" required>
                    </div>
                    <div class="form-group">
                        <label for="ano">Ano *</label>
                        <input type="number" id="ano" name="ano" required min="2020" max="2100">
                    </div>
                    <div class="form-group">
                        <label for="ordem">Ordem</label>
                        <input type="number" id="ordem" name="ordem" min="1">
                    </div>
                </div>

                <div class="form-group">
                    <label for="descricao">Descri√ß√£o</label>
                    <textarea id="descricao" name="descricao" rows="4"></textarea>
                </div>

                <div class="form-group">
                    <label for="linkCompra">Link de Compra</label>
                    <input type="url" id="linkCompra" name="linkCompra">
                </div>

                <div class="form-group">
                    <label for="ativo">Status</label>
                    <select id="ativo" name="ativo">
                        <option value="true">Ativo</option>
                        <option value="false">Inativo</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="capa">Capa (Imagem)</label>
                    <input type="file" id="capa" name="capa" accept="image/*">
                    <div id="capaPreview" class="image-preview"></div>
                </div>

                <div class="form-group">
                    <label for="pdf">PDF para Download *</label>
                    <input type="file" id="pdf" name="pdf" accept="application/pdf">
                    <small class="form-help">Arquivo PDF que ser√° baixado ap√≥s a compra. Obrigat√≥rio para novos jornais.</small>
                    <div id="pdfPreview" class="pdf-preview"></div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelBtn" onclick="if(typeof closeModal === 'function') { closeModal(); } else if(typeof window.closeModal === 'function') { window.closeModal(); } else { console.error('closeModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('jornalModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Criar/Editar Carrossel -->
    <div id="carrosselModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="carrosselModalTitle">Novo Item</h2>
                <button type="button" class="modal-close" id="closeCarrosselModal" onclick="if(typeof window.closeCarrosselModal === 'function') { window.closeCarrosselModal(); } else { console.error('closeCarrosselModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('carrosselModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">&times;</button>
            </div>
            <form id="carrosselForm" onsubmit="event.preventDefault(); if(typeof handleSaveCarrossel === 'function') { handleSaveCarrossel(event); } else if(typeof window.handleSaveCarrossel === 'function') { window.handleSaveCarrossel(event); } else { console.error('handleSaveCarrossel n√£o est√° dispon√≠vel!'); } return false;">
                <input type="hidden" id="carrosselId">
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="carrosselOrdem">Ordem</label>
                        <input type="number" id="carrosselOrdem" name="ordem" min="1">
                    </div>
                    <div class="form-group">
                        <label for="carrosselAtivo">Status</label>
                        <select id="carrosselAtivo" name="ativo">
                            <option value="true">Ativo</option>
                            <option value="false">Inativo</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="carrosselImagem">Imagem *</label>
                    <input type="file" id="carrosselImagem" name="imagem" accept="image/*">
                    <small class="form-help">A imagem ser√° exibida no carrossel</small>
                    <div id="carrosselImagemPreview" class="image-preview"></div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelCarrosselBtn" onclick="if(typeof window.closeCarrosselModal === 'function') { window.closeCarrosselModal(); } else { console.error('closeCarrosselModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('carrosselModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Criar/Editar Carrossel M√©dio -->
    <div id="carrosselMedioModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="carrosselMedioModalTitle">Novo Item</h2>
                <button type="button" class="modal-close" id="closeCarrosselMedioModal" onclick="if(typeof window.closeCarrosselMedioModal === 'function') { window.closeCarrosselMedioModal(); } else { console.error('closeCarrosselMedioModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('carrosselMedioModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">&times;</button>
            </div>
            <form id="carrosselMedioForm" onsubmit="event.preventDefault(); if(typeof handleSaveCarrosselMedio === 'function') { handleSaveCarrosselMedio(event); } else if(typeof window.handleSaveCarrosselMedio === 'function') { window.handleSaveCarrosselMedio(event); } else { console.error('handleSaveCarrosselMedio n√£o est√° dispon√≠vel!'); } return false;">
                <input type="hidden" id="carrosselMedioId">
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="carrosselMedioOrdem">Ordem</label>
                        <input type="number" id="carrosselMedioOrdem" name="ordem" min="1">
                    </div>
                    <div class="form-group">
                        <label for="carrosselMedioAtivo">Status</label>
                        <select id="carrosselMedioAtivo" name="ativo">
                            <option value="true">Ativo</option>
                            <option value="false">Inativo</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="carrosselMedioImagem">Imagem *</label>
                    <input type="file" id="carrosselMedioImagem" name="materia" accept="image/*">
                    <small class="form-help">A imagem ser√° exibida no carrossel m√©dio (recomendado: 800x600px)</small>
                    <div id="carrosselMedioImagemPreview" class="image-preview"></div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelCarrosselMedioBtn" onclick="if(typeof window.closeCarrosselMedioModal === 'function') { window.closeCarrosselMedioModal(); } else { console.error('closeCarrosselMedioModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('carrosselMedioModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Criar/Editar Respons√°vel -->
    <div id="responsavelModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="responsavelModalTitle">Novo Respons√°vel</h2>
                <button type="button" class="modal-close" id="closeResponsavelModal" onclick="if(typeof window.closeResponsavelModal === 'function') { window.closeResponsavelModal(); } else { console.error('closeResponsavelModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('responsavelModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">&times;</button>
            </div>
            <form id="responsavelForm" onsubmit="event.preventDefault(); if(typeof handleSaveResponsavel === 'function') { handleSaveResponsavel(event); } else if(typeof window.handleSaveResponsavel === 'function') { window.handleSaveResponsavel(event); } else { console.error('handleSaveResponsavel n√£o est√° dispon√≠vel!'); } return false;">
                <input type="hidden" id="responsavelId">
                
                <div class="form-group">
                    <label for="responsavelNome">Nome *</label>
                    <input type="text" id="responsavelNome" name="nome" required>
                </div>

                <div class="form-group">
                    <label for="responsavelCargo">Cargo *</label>
                    <input type="text" id="responsavelCargo" name="cargo" required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="responsavelOrdem">Ordem</label>
                        <input type="number" id="responsavelOrdem" name="ordem" min="1">
                    </div>
                    <div class="form-group">
                        <label for="responsavelAtivo">Status</label>
                        <select id="responsavelAtivo" name="ativo">
                            <option value="true">Ativo</option>
                            <option value="false">Inativo</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="responsavelImagem">Foto</label>
                    <input type="file" id="responsavelImagem" name="imagem" accept="image/*">
                    <small class="form-help">A foto ser√° exibida no perfil do respons√°vel</small>
                    <div id="responsavelImagemPreview" class="image-preview"></div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelResponsavelBtn" onclick="if(typeof window.closeResponsavelModal === 'function') { window.closeResponsavelModal(); } else { console.error('closeResponsavelModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('responsavelModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Criar/Editar FAQ -->
    <div id="faqModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="faqModalTitle">Nova Pergunta</h2>
                <button type="button" class="modal-close" id="closeFaqModal" onclick="if(typeof window.closeFaqModal === 'function') { window.closeFaqModal(); } else { console.error('closeFaqModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('faqModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">&times;</button>
            </div>
            <form id="faqForm" onsubmit="event.preventDefault(); if(typeof handleSaveFAQ === 'function') { handleSaveFAQ(event); } else if(typeof window.handleSaveFAQ === 'function') { window.handleSaveFAQ(event); } else { console.error('handleSaveFAQ n√£o est√° dispon√≠vel!'); } return false;">
                <input type="hidden" id="faqId">
                
                <div class="form-group">
                    <label for="faqPergunta">Pergunta *</label>
                    <input type="text" id="faqPergunta" name="pergunta" required>
                </div>

                <div class="form-group">
                    <label for="faqResposta">Resposta *</label>
                    <textarea id="faqResposta" name="resposta" rows="6" required></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="faqOrdem">Ordem</label>
                        <input type="number" id="faqOrdem" name="ordem" min="1">
                    </div>
                    <div class="form-group">
                        <label for="faqAtivo">Status</label>
                        <select id="faqAtivo" name="ativo">
                            <option value="true">Ativo</option>
                            <option value="false">Inativo</option>
                        </select>
                    </div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelFaqBtn" onclick="if(typeof window.closeFaqModal === 'function') { window.closeFaqModal(); } else { console.error('closeFaqModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('faqModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Criar/Editar Site -->
    <div id="siteModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="siteModalTitle">Novo Site</h2>
                <button type="button" class="modal-close" id="closeSiteModal" onclick="if(typeof window.closeSiteModal === 'function') { window.closeSiteModal(); } else { console.error('closeSiteModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('siteModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">&times;</button>
            </div>
            <form id="siteForm">
                <input type="hidden" id="siteId">
                
                <div class="form-group">
                    <label for="siteNome">Nome *</label>
                    <input type="text" id="siteNome" name="nome" required>
                </div>

                <div class="form-group">
                    <label for="siteUrl">URL *</label>
                    <input type="url" id="siteUrl" name="url" required placeholder="https://example.com">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="siteOrdem">Ordem</label>
                        <input type="number" id="siteOrdem" name="ordem" min="1">
                    </div>
                    <div class="form-group">
                        <label for="siteAtivo">Status</label>
                        <select id="siteAtivo" name="ativo">
                            <option value="true">Ativo</option>
                            <option value="false">Inativo</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="siteImagem">Logo/Imagem</label>
                    <input type="file" id="siteImagem" name="imagem" accept="image/*">
                    <small class="form-help">A imagem/logo ser√° exibida para o site</small>
                    <div id="siteImagemPreview" class="image-preview"></div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelSiteBtn" onclick="if(typeof window.closeSiteModal === 'function') { window.closeSiteModal(); } else { console.error('closeSiteModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('siteModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Criar/Editar Not√≠cia -->
    <div id="noticiaModal" class="modal hidden">
        <div class="modal-content" style="max-width: 800px; max-height: 90vh; overflow-y: auto;">
            <div class="modal-header">
                <h2 id="noticiaModalTitle">Nova Not√≠cia</h2>
                <button type="button" class="modal-close" id="closeNoticiaModal" onclick="if(typeof window.closeNoticiaModal === 'function') { window.closeNoticiaModal(); } else { console.error('closeNoticiaModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('noticiaModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">&times;</button>
            </div>
            <form id="noticiaForm" onsubmit="event.preventDefault(); if(typeof handleSaveNoticia === 'function') { handleSaveNoticia(event); } else if(typeof window.handleSaveNoticia === 'function') { window.handleSaveNoticia(event); } else { console.error('handleSaveNoticia n√£o est√° dispon√≠vel!'); } return false;">
                <input type="hidden" id="noticiaId">
                
                <div class="form-group">
                    <label for="noticiaTitle">T√≠tulo *</label>
                    <input type="text" id="noticiaTitle" name="title" required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="noticiaDate">Data</label>
                        <input type="date" id="noticiaDate" name="date">
                    </div>
                    <div class="form-group">
                        <label for="noticiaCategory">Categoria</label>
                        <select id="noticiaCategory" name="category">
                            <option value="Espiritualidade">Espiritualidade</option>
                            <option value="Maanaim">Maanaim</option>
                            <option value="Popular">Popular</option>
                            <option value="geral">Geral</option>
                            <option value="tecnologia">Tecnologia</option>
                            <option value="politica">Pol√≠tica</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="noticiaExcerpt">Resumo/Excerpt</label>
                    <textarea id="noticiaExcerpt" name="excerpt" rows="3" placeholder="Breve descri√ß√£o da not√≠cia que aparecer√° na lista"></textarea>
                </div>

                <div class="form-group">
                    <label for="noticiaContent">Conte√∫do *</label>
                    <textarea id="noticiaContent" name="content" rows="10" required placeholder="Conte√∫do completo da not√≠cia"></textarea>
                </div>

                <div class="form-group">
                    <label for="noticiaTag">Tag</label>
                    <input type="text" id="noticiaTag" name="tag" placeholder="Tags separadas por v√≠rgula">
                </div>

                <div class="form-group">
                    <label for="noticiaImage">Imagem</label>
                    <input type="file" id="noticiaImage" name="image" accept="image/*">
                    <small class="form-help">A imagem ser√° exibida na lista de not√≠cias</small>
                    <div id="noticiaImagePreview" class="image-preview"></div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelNoticiaBtn" onclick="if(typeof window.closeNoticiaModal === 'function') { window.closeNoticiaModal(); } else { console.error('closeNoticiaModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('noticiaModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Criar/Editar Colunista -->
    <div id="colunistaModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="colunistaModalTitle">Novo Colunista</h2>
                <button type="button" class="modal-close" id="closeColunistaModal" onclick="if(typeof window.closeColunistaModal === 'function') { window.closeColunistaModal(); } else { console.error('closeColunistaModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('colunistaModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">&times;</button>
            </div>
            <form id="colunistaForm" onsubmit="event.preventDefault(); if(typeof handleSaveColunista === 'function') { handleSaveColunista(event); } else if(typeof window.handleSaveColunista === 'function') { window.handleSaveColunista(event); } else { console.error('handleSaveColunista n√£o est√° dispon√≠vel!'); } return false;">
                <input type="hidden" id="colunistaId">
                
                <div class="form-group">
                    <label for="colunistaNome">Nome do Colunista *</label>
                    <input type="text" id="colunistaNome" name="nome" required placeholder="Ex: Bispo Rodrigo de Carvalho">
                </div>

                <div class="form-group">
                    <label for="colunistaColuna">Nome da Coluna *</label>
                    <input type="text" id="colunistaColuna" name="coluna" required placeholder="Ex: CULTURA DO REINO">
                    <small class="form-help">Nome que aparecer√° na caixa azul do card</small>
                </div>

                <div class="form-group">
                    <label for="colunistaConteudo">Conte√∫do da Mat√©ria *</label>
                    <textarea id="colunistaConteudo" name="conteudo" rows="10" required placeholder="Texto completo da mat√©ria do colunista"></textarea>
                    <small class="form-help">Texto que ser√° exibido no card do colunista</small>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="colunistaInstagram">Instagram</label>
                        <input type="text" id="colunistaInstagram" name="instagram" placeholder="Ex: @instagram_handle">
                    </div>
                    <div class="form-group">
                        <label for="colunistaOrdem">Ordem</label>
                        <input type="number" id="colunistaOrdem" name="ordem" min="1" value="0">
                        <small class="form-help">Ordem de exibi√ß√£o (menor n√∫mero aparece primeiro)</small>
                    </div>
                </div>

                <div class="form-group">
                    <label for="colunistaAtivo">Status</label>
                    <select id="colunistaAtivo" name="ativo">
                        <option value="true">Ativo</option>
                        <option value="false">Inativo</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="colunistaImagem">Imagem do Colunista</label>
                    <input type="file" id="colunistaImagem" name="imagem" accept="image/*">
                    <small class="form-help">Foto do colunista que ser√° exibida no card</small>
                    <div id="colunistaImagemPreview" class="image-preview"></div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelColunistaBtn" onclick="if(typeof window.closeColunistaModal === 'function') { window.closeColunistaModal(); } else { console.error('closeColunistaModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('colunistaModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner"></div>
    </div>

    <script>
        // For√ßar recarregamento dos arquivos
        const timestamp = Date.now();
        console.log('üìù Carregando app.js...');
        
        const script = document.createElement('script');
        script.src = `/js/app.js?v=31.0&t=${timestamp}`;
        script.type = 'text/javascript';
        script.async = false; // Carregar de forma s√≠ncrona para garantir ordem
        script.defer = false; // N√£o usar defer para garantir execu√ß√£o imediata
        
        script.onload = function() {
            console.log('‚úÖ app.js carregado com sucesso!');
            
            // Verificar IMEDIATAMENTE se handleLogin est√° dispon√≠vel
            function checkHandleLogin() {
                if (typeof window.handleLogin === 'function') {
                    console.log('‚úÖ window.handleLogin est√° dispon√≠vel!');
                    return true;
                } else if (typeof handleLogin === 'function') {
                    console.log('‚úÖ handleLogin est√° dispon√≠vel sem window - tornando global');
                    window.handleLogin = handleLogin;
                    return true;
                }
                return false;
            }
            
            // Verificar imediatamente
            if (!checkHandleLogin()) {
                // Se n√£o estiver dispon√≠vel, tentar novamente ap√≥s um pequeno delay
                let checkCount = 0;
                const maxChecks = 5;
                
                const retryCheck = () => {
                    checkCount++;
                    if (checkHandleLogin()) {
                        return;
                    } else if (checkCount < maxChecks) {
                        console.log('‚è≥ handleLogin ainda n√£o dispon√≠vel, tentando novamente em 200ms... (tentativa ' + checkCount + '/' + maxChecks + ')');
                        setTimeout(retryCheck, 200);
                    } else {
                        console.error('‚ùå handleLogin N√ÉO est√° dispon√≠vel ap√≥s ' + maxChecks + ' tentativas!');
                        console.error('Isso indica um erro no carregamento ou execu√ß√£o do app.js');
                        console.error('Verifique o console para erros de JavaScript');
                        // Criar um fallback b√°sico
                        window.handleLogin = function(e) {
                            alert('Erro: Fun√ß√£o de login n√£o foi carregada. Verifique o console do navegador (F12) para erros de JavaScript.');
                            console.error('handleLogin fallback - fun√ß√£o n√£o foi carregada corretamente');
                        };
                    }
                };
                
                setTimeout(retryCheck, 100);
            }
        };
        
        script.onerror = function() {
            console.error('‚ùå Erro ao carregar app.js!');
            alert('Erro ao carregar o JavaScript. Verifique se o servidor est√° rodando na porta 5000.');
        };
        
        document.head.appendChild(script);
    </script>
</body>
</html>
