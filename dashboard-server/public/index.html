<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="icon" href="./img/logo jornal.png" type="x-icon">

    <title>Dashboard - Jornal Reino dos C√©us</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    

    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/monokai.min.css">
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* Estilos cr√≠ticos para garantir que os cards apare√ßam */
        .jornal-card {
            display: flex !important;
            visibility: visible !important;
            opacity: 1 !important;
            background: #ffffff !important;
            border-radius: 16px !important;
        }
        .jornais-grid {
            display: grid !important;
            grid-template-columns: repeat(auto-fill, minmax(340px, 1fr)) !important;
            gap: 28px !important;
        }
        
        /* Layout Profissional de Login - Cores do Site */
        .login-wrapper {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #00095b 0%, #001a7a 50%, #00095b 100%);
            padding: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .login-wrapper::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.08) 1px, transparent 1px);
            background-size: 60px 60px;
            animation: moveBackground 25s linear infinite;
        }
        
        .login-wrapper::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 30%, rgba(255, 192, 20, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(37, 99, 235, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }
        
        @keyframes moveBackground {
            0% { transform: translate(0, 0); }
            100% { transform: translate(60px, 60px); }
        }
        
        .login-container {
            position: relative;
            z-index: 1;
            max-width: 460px;
            width: 100%;
            background: rgba(255, 255, 255, 0.99);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 56px 48px;
            border-radius: 28px;
            box-shadow: 
                0 25px 80px rgba(0, 9, 91, 0.4),
                0 10px 30px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
            animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(40px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .login-header {
            text-align: center;
            margin-bottom: 44px;
        }
        
        .login-logo {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 140px;
            height: 140px;
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 20px;
            margin-bottom: 28px;
            box-shadow: 
                0 12px 24px rgba(0, 9, 91, 0.3),
                0 4px 8px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(0, 9, 91, 0.1);
            padding: 16px;
        }
        
        .login-logo::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(0, 9, 91, 0.05), transparent);
            animation: shine 3s infinite;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        .login-logo img {
            position: relative;
            z-index: 1;
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        .login-title {
            font-size: 34px;
            font-weight: 800;
            background: linear-gradient(135deg, #00095b 0%, #001a7a 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            letter-spacing: -0.8px;
        }
        
        .login-subtitle {
            font-size: 15px;
            color: #64748b;
            line-height: 1.6;
            font-weight: 400;
        }
        
        .login-form {
            display: flex;
            flex-direction: column;
            gap: 26px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .form-label {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            font-weight: 600;
            color: #334155;
        }
        
        .form-label svg {
            color: #00095b;
            width: 18px;
            height: 18px;
        }
        
        .form-input {
            width: 100%;
            padding: 16px 18px;
            font-size: 15px;
            color: #1e293b;
            background: #ffffff;
            border: 2px solid #e2e8f0;
            border-radius: 14px;
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            outline: none;
            pointer-events: auto !important;
            user-select: text !important;
            font-family: 'Inter', sans-serif;
        }
        
        .form-input::placeholder {
            color: #94a3b8;
        }
        
        .form-input:focus {
            border-color: #00095b;
            box-shadow: 0 0 0 4px rgba(0, 9, 91, 0.1);
            background: #ffffff;
            transform: translateY(-1px);
        }
        
        .form-input:hover:not(:focus) {
            border-color: #cbd5e1;
        }
        
        .btn-login {
            width: 100%;
            padding: 18px 24px;
            font-size: 16px;
            font-weight: 700;
            color: #000000;
            background: linear-gradient(135deg, #ffc014 0%, #ffdb3c 100%);
            border: none;
            border-radius: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 
                0 8px 20px rgba(255, 192, 20, 0.4),
                0 4px 8px rgba(255, 192, 20, 0.2);
            margin-top: 10px;
            position: relative;
            overflow: hidden;
        }
        
        .btn-login::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }
        
        .btn-login:hover {
            transform: translateY(-3px);
            box-shadow: 
                0 12px 28px rgba(255, 192, 20, 0.5),
                0 6px 12px rgba(255, 192, 20, 0.3);
        }
        
        .btn-login:hover::before {
            left: 100%;
        }
        
        .btn-login:active {
            transform: translateY(-1px);
        }
        
        .btn-login svg {
            transition: transform 0.3s ease;
            width: 20px;
            height: 20px;
        }
        
        .btn-login:hover svg {
            transform: translateX(5px);
        }
        
        .error-message {
            padding: 14px 18px;
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
            color: #dc2626;
            border-radius: 12px;
            font-size: 14px;
            margin-top: -4px;
            display: none;
            border: 1px solid #fca5a5;
            font-weight: 500;
        }
        
        .error-message.show {
            display: block;
            animation: shake 0.4s ease;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        /* Responsivo */
        @media (max-width: 480px) {
            .login-container {
                padding: 40px 28px;
                border-radius: 24px;
            }
            
            .login-title {
                font-size: 30px;
            }
            
            .login-logo {
                width: 110px;
                height: 110px;
                padding: 12px;
            }
            
            .login-subtitle {
                font-size: 14px;
            }
        }
        
        /* Garantir que o overlay de loading n√£o bloqueie o login */
        .loading-overlay {
            pointer-events: none !important;
        }
        
        .loading-overlay.hidden {
            display: none !important;
        }
    </style>
    <script>
        // Suprimir erros de arquivos que n√£o pertencem ao dashboard
        const originalError = console.error;
        console.error = function(...args) {
            const message = args.join(' ');
            if (
                message.includes('gsap.min.js') ||
                message.includes('style_efeitos.js') ||
                message.includes('materia-jornal') ||
                message.includes('MIME type') ||
                message.includes('Refused to execute script')
            ) {
                // Ignorar esses erros
                return;
            }
            originalError.apply(console, args);
        };
        
        // Carregar CSS com timestamp para evitar cache
        const cssLink = document.createElement('link');
        cssLink.rel = 'stylesheet';
        cssLink.href = `/dashboard/css/style.css?v=4.0&t=${Date.now()}`;
        document.head.appendChild(cssLink);
        
        // Log para verificar se os estilos est√£o carregando
        cssLink.onload = () => console.log('‚úÖ CSS carregado com sucesso!');
        cssLink.onerror = () => console.error('‚ùå Erro ao carregar CSS!');
        
        // Garantir que os campos de login estejam sempre habilitados
        document.addEventListener('DOMContentLoaded', function() {
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');
            
            if (emailInput) {
                emailInput.removeAttribute('readonly');
                emailInput.removeAttribute('disabled');
                emailInput.style.pointerEvents = 'auto';
                emailInput.style.userSelect = 'text';
                emailInput.style.webkitUserSelect = 'text';
            }
            
            if (passwordInput) {
                passwordInput.removeAttribute('readonly');
                passwordInput.removeAttribute('disabled');
                passwordInput.style.pointerEvents = 'auto';
                passwordInput.style.userSelect = 'text';
                passwordInput.style.webkitUserSelect = 'text';
            }
            
            // Remover qualquer overlay de loading que possa estar bloqueando
            const loadingOverlays = document.querySelectorAll('.loading-overlay');
            loadingOverlays.forEach(overlay => {
                overlay.classList.add('hidden');
                overlay.style.display = 'none';
                overlay.style.pointerEvents = 'none';
            });
        });
    </script>
</head>
<body>
    <div id="app">
        <!-- Tela de Login -->
        <div id="loginScreen" class="screen">
            <div class="login-wrapper">
                <div class="login-container">
                    <div class="login-header">
                        <div class="login-logo">
                            <img src="/Imagem/LOGO - REINO DOS CEUS.png" alt="Logo Reino dos C√©us" style="width: 100%; height: 100%; object-fit: contain; padding: 8px;">
                        </div>
                        <h1 class="login-title">Bem-vindo</h1>
                        <p class="login-subtitle">Entre com suas credenciais para acessar o dashboard</p>
                    </div>
                    <form id="loginForm" class="login-form" onsubmit="event.preventDefault(); return false;">
                        <div class="form-group">
                            <label for="email" class="form-label">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M22 6L12 13L2 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                Email
                            </label>
                            <input 
                                type="email" 
                                id="email" 
                                name="email" 
                                class="form-input" 
                                autocomplete="email" 
                                placeholder="seu@email.com"
                                required
                            >
                        </div>
                        <div class="form-group">
                            <label for="password" class="form-label">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
                                    <path d="M7 11V7C7 4.23858 9.23858 2 12 2C14.7614 2 17 4.23858 17 7V11" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                                Senha
                            </label>
                            <input 
                                type="password" 
                                id="password" 
                                name="password" 
                                class="form-input" 
                                autocomplete="current-password" 
                                placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                                required
                            >
                        </div>
                        <button 
                            type="button" 
                            id="loginSubmitBtn" 
                            class="btn-login" 
                            onclick="(function() { if(typeof window.handleLogin === 'function') { window.handleLogin(event); } else if(typeof handleLogin === 'function') { window.handleLogin = handleLogin; window.handleLogin(event); } else { console.error('handleLogin n√£o est√° dispon√≠vel! Tentando novamente em 200ms...'); setTimeout(function() { if(typeof window.handleLogin === 'function') { window.handleLogin(event); } else if(typeof handleLogin === 'function') { window.handleLogin = handleLogin; window.handleLogin(event); } else { alert('Erro: Fun√ß√£o de login n√£o carregada. Por favor, recarregue a p√°gina (Ctrl+F5).'); } }, 200); } })();"
                        >
                            <span>Entrar</span>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                        <div id="loginError" class="error-message"></div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Dashboard Principal -->
        <div id="dashboardScreen" class="screen hidden">
            <div class="dashboard-layout">
                <!-- Sidebar Overlay (Mobile) -->
                <div class="sidebar-overlay" id="sidebarOverlay"></div>
                
                <!-- Sidebar -->
                <aside class="dashboard-sidebar">
                    <div class="sidebar-header">
                        <div class="sidebar-logo">
                            <i class='bx bx-book-reader'></i>
                            <h2>Dashboard</h2>
                        </div>
                    </div>
                    
                    <div class="sidebar-user">
                        <div class="user-avatar">
                            <i class='bx bx-user'></i>
                        </div>
                        <div class="user-details">
                            <div class="user-name" id="userName">Usu√°rio</div>
                            <div class="user-email" id="userEmail">admin@jornal.com</div>
                        </div>
                    </div>
                    
                    <nav class="sidebar-nav">
                        <button class="nav-item active" data-tab="jornais">
                            <i class='bx bx-book'></i>
                            <span>Jornais</span>
                        </button>
                        <button class="nav-item" data-tab="carrossel">
                            <i class='bx bx-slider-alt'></i>
                            <span>Carrossel</span>
                        </button>
                        <button class="nav-item" data-tab="carrossel-medio">
                            <i class='bx bx-slider'></i>
                            <span>Carrossel M√©dio</span>
                        </button>
                        <button class="nav-item" data-tab="video">
                            <i class='bx bx-video'></i>
                            <span>V√≠deo</span>
                        </button>
                        <button class="nav-item" data-tab="responsaveis">
                            <i class='bx bx-user'></i>
                            <span>Respons√°veis</span>
                        </button>
                        <button class="nav-item" data-tab="faq">
                            <i class='bx bx-help-circle'></i>
                            <span>FAQ</span>
                        </button>
                        <button class="nav-item" data-tab="sites">
                            <i class='bx bx-globe'></i>
                            <span>Sites Igreja</span>
                        </button>
                        <button class="nav-item" data-tab="textos">
                            <i class='bx bx-text'></i>
                            <span>Textos</span>
                        </button>
                        <button class="nav-item" data-tab="banner">
                            <i class='bx bx-image'></i>
                            <span>Banner Modal</span>
                        </button>
                        <button class="nav-item" data-tab="noticias">
                            <i class='bx bx-news'></i>
                            <span>Not√≠cias</span>
                        </button>
                        <button class="nav-item" data-tab="colunistas">
                            <i class='bx bx-user-voice'></i>
                            <span>Colunistas</span>
                        </button>
                        <button class="nav-item" data-tab="pagamentos">
                            <i class='bx bx-credit-card'></i>
                            <span>Pagamentos</span>
                        </button>
                        <button class="nav-item" data-tab="santuarios">
                            <i class='bx bx-church'></i>
                            <span>Santu√°rios</span>
                        </button>
                        <button class="nav-item" data-tab="verificar-banco">
                            <i class='bx bx-search-alt'></i>
                            <span>Verificar Banco</span>
                        </button>
                    </nav>
                    
                    <div class="sidebar-footer">
                        <button id="logoutBtn" class="nav-item logout-btn" type="button">
                            <i class='bx bx-log-out'></i>
                            <span>Sair</span>
                        </button>
                    </div>
                </aside>

                <!-- Main Content -->
                <div class="dashboard-content-wrapper">
                    <header class="dashboard-header">
                        <h1 id="dashboardTitle">Dashboard - Gerenciamento de Jornais</h1>
                        <div class="header-actions">
                            <button class="menu-toggle" id="menuToggle" style="display: none;">
                                <i class='bx bx-menu'></i>
                            </button>
                        </div>
                    </header>

                    <main class="dashboard-main">

                <!-- Tab Jornais -->
                <div class="tab-content active" id="tab-jornais">
                    <div class="dashboard-actions">
                        <button id="newJornalBtn" class="btn btn-primary" onclick="if(typeof openJornalModal === 'function') { openJornalModal(); } else { console.error('openJornalModal n√£o est√° dispon√≠vel!'); alert('Erro: Fun√ß√£o n√£o dispon√≠vel. Recarregue a p√°gina.'); }">+ Novo Jornal</button>
                    </div>
                    <div id="jornaisList" class="jornais-grid"></div>
                </div>

                <!-- Tab Carrossel -->
                <div class="tab-content" id="tab-carrossel">
                    <div class="dashboard-actions">
                        <button id="newCarrosselBtn" class="btn btn-primary" onclick="if(typeof window.openCarrosselModal === 'function') { window.openCarrosselModal(); } else { console.error('openCarrosselModal n√£o est√° dispon√≠vel!'); alert('Erro: Fun√ß√£o n√£o dispon√≠vel. Recarregue a p√°gina.'); }">+ Novo Item</button>
                    </div>
                    <div id="carrosselList" class="jornais-grid"></div>
                </div>

                <!-- Tab Carrossel M√©dio -->
                <div class="tab-content" id="tab-carrossel-medio">
                    <div class="dashboard-actions">
                        <button id="newCarrosselMedioBtn" class="btn btn-primary" onclick="if(typeof window.openCarrosselMedioModal === 'function') { window.openCarrosselMedioModal(); } else { console.error('openCarrosselMedioModal n√£o est√° dispon√≠vel!'); alert('Erro: Fun√ß√£o n√£o dispon√≠vel. Recarregue a p√°gina.'); }">+ Novo Item</button>
                    </div>
                    <div id="carrosselMedioList" class="jornais-grid"></div>
                </div>

                <!-- Tab V√≠deo -->
                <div class="tab-content" id="tab-video">
                    <div id="videoConfig" class="config-section"></div>
                </div>

                <!-- Tab Respons√°veis -->
                <div class="tab-content" id="tab-responsaveis">
                    <div class="dashboard-actions">
                        <button id="newResponsavelBtn" class="btn btn-primary" onclick="if(typeof window.openResponsavelModal === 'function') { window.openResponsavelModal(); } else { console.error('openResponsavelModal n√£o est√° dispon√≠vel!'); alert('Erro: Fun√ß√£o n√£o dispon√≠vel. Recarregue a p√°gina.'); }">+ Novo Respons√°vel</button>
                    </div>
                    <div id="responsaveisList" class="jornais-grid"></div>
                </div>

                <!-- Tab FAQ -->
                <div class="tab-content" id="tab-faq">
                    <div class="dashboard-actions">
                        <button id="newFaqBtn" class="btn btn-primary" onclick="if(typeof window.openFaqModal === 'function') { window.openFaqModal(); } else { console.error('openFaqModal n√£o est√° dispon√≠vel!'); alert('Erro: Fun√ß√£o n√£o dispon√≠vel. Recarregue a p√°gina.'); }">+ Nova Pergunta</button>
                    </div>
                    <div id="faqList"></div>
                </div>

                <!-- Tab Sites -->
                <div class="tab-content" id="tab-sites">
                    <div class="dashboard-actions">
                        <button id="newSiteBtn" class="btn btn-primary" onclick="if(typeof window.openSiteModal === 'function') { window.openSiteModal(); } else { console.error('openSiteModal n√£o est√° dispon√≠vel!'); alert('Erro: Fun√ß√£o n√£o dispon√≠vel. Recarregue a p√°gina.'); }">+ Novo Site</button>
                    </div>
                    <div id="sitesList" class="jornais-grid"></div>
                </div>

                <!-- Tab Textos -->
                <div class="tab-content" id="tab-textos">
                    <div id="textosConfig" class="config-section"></div>
                </div>

                <!-- Tab Banner -->
                <div class="tab-content" id="tab-banner">
                    <div id="bannerConfig" class="config-section"></div>
                </div>

                <!-- Tab Not√≠cias -->
                <div class="tab-content" id="tab-noticias">
                    <div class="dashboard-actions">
                        <button id="newNoticiaBtn" class="btn btn-primary" onclick="if(typeof window.openNoticiaModal === 'function') { window.openNoticiaModal(); } else { console.error('openNoticiaModal n√£o est√° dispon√≠vel!'); alert('Erro: Fun√ß√£o n√£o dispon√≠vel. Recarregue a p√°gina.'); }">+ Nova Not√≠cia</button>
                    </div>
                    <div id="noticiasList"></div>
                </div>

                <!-- Tab Colunistas -->
                <div class="tab-content" id="tab-colunistas">
                    <div class="dashboard-actions">
                        <button id="newColunistaBtn" class="btn btn-primary" onclick="if(typeof window.openColunistaModal === 'function') { window.openColunistaModal(); } else { console.error('openColunistaModal n√£o est√° dispon√≠vel!'); alert('Erro: Fun√ß√£o n√£o dispon√≠vel. Recarregue a p√°gina.'); }">+ Novo Colunista</button>
                    </div>
                    <div id="colunistasList" class="jornais-grid"></div>
                </div>

                <!-- Tab Pagamentos -->
                <div class="tab-content" id="tab-pagamentos">
                    <div class="dashboard-actions">
                        <button id="updatePaymentValuesBtn" class="btn btn-secondary" onclick="if(typeof window.updatePaymentValues === 'function') { window.updatePaymentValues(); } else { console.error('updatePaymentValues n√£o est√° dispon√≠vel!'); alert('Erro: Fun√ß√£o n√£o dispon√≠vel. Recarregue a p√°gina.'); }">üîÑ Atualizar Valores dos Pagamentos</button>
                    </div>
                    <div id="pagamentosList"></div>
                </div>

                <!-- Tab Santu√°rios -->
                <div class="tab-content" id="tab-santuarios">
                    <div class="dashboard-actions">
                        <div class="santuarios-add-form">
                            <input type="text" id="santuarioNomeInput" placeholder="Nome do santu√°rio" class="form-input santuario-input">
                            <button type="button" id="addSantuarioBtn" class="btn btn-primary">+ Adicionar Santu√°rio</button>
                        </div>
                    </div>
                    <p class="form-hint" style="margin-bottom: 1rem;">Os santu√°rios cadastrados aqui aparecem como op√ß√µes no checkout, na etapa de finalizar compra.</p>
                    <div id="santuariosList" class="jornais-grid"></div>
                </div>

                <!-- Tab Verificar Banco -->
                <div class="tab-content" id="tab-verificar-banco">
                    <div class="dashboard-actions">
                        <button id="verificarBancoBtn" class="btn btn-primary" onclick="if(typeof window.verificarBancoDados === 'function') { window.verificarBancoDados(); } else { console.error('verificarBancoDados n√£o est√° dispon√≠vel!'); alert('Erro: Fun√ß√£o n√£o dispon√≠vel. Recarregue a p√°gina.'); }">
                            <i class='bx bx-search-alt'></i> Verificar Banco de Dados
                        </button>
                        <button id="refreshVerificarBtn" class="btn btn-secondary" onclick="if(typeof window.verificarBancoDados === 'function') { window.verificarBancoDados(); } else { console.error('verificarBancoDados n√£o est√° dispon√≠vel!'); alert('Erro: Fun√ß√£o n√£o dispon√≠vel. Recarregue a p√°gina.'); }">
                            <i class='bx bx-refresh'></i> Atualizar
                        </button>
                    </div>
                    
                    <div id="verificarBancoLoading" class="loading" style="display: none; text-align: center; padding: 2rem; color: #666;">
                        <p>‚è≥ Verificando banco de dados...</p>
                    </div>
                    
                    <div id="verificarBancoResults" style="display: none;">
                        <!-- Informa√ß√µes de Conex√£o -->
                        <div class="info-section" style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem; border-left: 4px solid #007bff;">
                            <h2 style="color: #007bff; margin-bottom: 1rem; font-size: 1.5rem;">
                                <i class='bx bx-server'></i> Informa√ß√µes de Conex√£o
                            </h2>
                            <table id="conexaoTable" style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr style="background: #e9ecef;">
                                        <th style="padding: 0.75rem; text-align: left; border-bottom: 1px solid #dee2e6;">Propriedade</th>
                                        <th style="padding: 0.75rem; text-align: left; border-bottom: 1px solid #dee2e6;">Valor</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        
                        <!-- Status de Transa√ß√£o -->
                        <div class="info-section" style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem; border-left: 4px solid #28a745;">
                            <h2 style="color: #28a745; margin-bottom: 1rem; font-size: 1.5rem;">
                                <i class='bx bx-lock'></i> Status de Transa√ß√£o
                            </h2>
                            <table id="transacaoTable" style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr style="background: #e9ecef;">
                                        <th style="padding: 0.75rem; text-align: left; border-bottom: 1px solid #dee2e6;">Propriedade</th>
                                        <th style="padding: 0.75rem; text-align: left; border-bottom: 1px solid #dee2e6;">Valor</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        
                        <!-- Lista de Jornais -->
                        <div class="info-section" style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem; border-left: 4px solid #ffc107;">
                            <h2 style="color: #ffc107; margin-bottom: 1rem; font-size: 1.5rem;">
                                <i class='bx bx-book'></i> Jornais no Banco (<span id="totalJornaisVerificar">0</span>)
                            </h2>
                            <div id="jornaisVerificarList" class="jornais-grid"></div>
                        </div>
                    </div>
                    
                    <div id="verificarBancoError" class="error-message" style="display: none; background: #f8d7da; color: #721c24; padding: 1rem; border-radius: 8px; border-left: 4px solid #dc3545; margin-top: 1rem;"></div>
                    
                    <div id="verificarBancoSuccess" class="success-message" style="display: none; background: #d4edda; color: #155724; padding: 1rem; border-radius: 8px; border-left: 4px solid #28a745; margin-top: 1rem;"></div>
                </div>
                    </main>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para Criar/Editar Jornal -->
    <div id="jornalModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Novo Jornal</h2>
                <button type="button" class="modal-close" id="closeModal" onclick="if(typeof closeModal === 'function') { closeModal(); } else if(typeof window.closeModal === 'function') { window.closeModal(); } else { console.error('closeModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('jornalModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">&times;</button>
            </div>
            <form id="jornalForm" onsubmit="event.preventDefault(); if(typeof handleSaveJornal === 'function') { handleSaveJornal(event); } else if(typeof window.handleSaveJornal === 'function') { window.handleSaveJornal(event); } else { console.error('handleSaveJornal n√£o est√° dispon√≠vel!'); } return false;">
                <input type="hidden" id="jornalId">
                
                <div class="form-group">
                    <label for="nome">Nome do Jornal *</label>
                    <input type="text" id="nome" name="nome" required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="mes">M√™s *</label>
                        <input type="text" id="mes" name="mes" required>
                    </div>
                    <div class="form-group">
                        <label for="ano">Ano *</label>
                        <input type="number" id="ano" name="ano" required min="2020" max="2100">
                    </div>
                    <div class="form-group">
                        <label for="ordem">Ordem</label>
                        <input type="number" id="ordem" name="ordem" min="1">
                    </div>
                </div>

                <div class="form-group">
                    <label for="descricao">Descri√ß√£o</label>
                    <textarea id="descricao" name="descricao" rows="4"></textarea>
                </div>

                <div class="form-group">
                    <label for="linkCompra">Link de Compra</label>
                    <input type="url" id="linkCompra" name="linkCompra">
                </div>

                <div class="form-group">
                    <label for="ativo">Status</label>
                    <select id="ativo" name="ativo">
                        <option value="true">Ativo</option>
                        <option value="false">Inativo</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="capa">Capa (Imagem)</label>
                    <input type="file" id="capa" name="capa" accept="image/*">
                    <div id="capaPreview" class="image-preview"></div>
                </div>

                <div class="form-group">
                    <label for="pdf">PDF para Download *</label>
                    <input type="file" id="pdf" name="pdf" accept="application/pdf">
                    <small class="form-help">Arquivo PDF que ser√° baixado ap√≥s a compra. Obrigat√≥rio para novos jornais.</small>
                    <div id="pdfPreview" class="pdf-preview"></div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelBtn" onclick="if(typeof closeModal === 'function') { closeModal(); } else if(typeof window.closeModal === 'function') { window.closeModal(); } else { console.error('closeModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('jornalModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Criar/Editar Carrossel -->
    <div id="carrosselModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="carrosselModalTitle">Novo Item</h2>
                <button type="button" class="modal-close" id="closeCarrosselModal" onclick="if(typeof window.closeCarrosselModal === 'function') { window.closeCarrosselModal(); } else { console.error('closeCarrosselModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('carrosselModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">&times;</button>
            </div>
            <form id="carrosselForm" onsubmit="event.preventDefault(); if(typeof handleSaveCarrossel === 'function') { handleSaveCarrossel(event); } else if(typeof window.handleSaveCarrossel === 'function') { window.handleSaveCarrossel(event); } else { console.error('handleSaveCarrossel n√£o est√° dispon√≠vel!'); } return false;">
                <input type="hidden" id="carrosselId">
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="carrosselOrdem">Ordem</label>
                        <input type="number" id="carrosselOrdem" name="ordem" min="1">
                    </div>
                    <div class="form-group">
                        <label for="carrosselAtivo">Status</label>
                        <select id="carrosselAtivo" name="ativo">
                            <option value="true">Ativo</option>
                            <option value="false">Inativo</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="carrosselImagem">Imagem *</label>
                    <input type="file" id="carrosselImagem" name="imagem" accept="image/*">
                    <small class="form-help">A imagem ser√° exibida no carrossel</small>
                    <div id="carrosselImagemPreview" class="image-preview"></div>
                </div>

                <div class="form-group">
                    <label for="carrosselLink">Link (opcional)</label>
                    <input type="url" id="carrosselLink" name="link" placeholder="https://exemplo.com/jornal-compra.html?id=1">
                    <small class="form-help">URL para onde o usu√°rio ser√° direcionado ao clicar no banner. Deixe em branco se n√£o quiser link.</small>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelCarrosselBtn" onclick="if(typeof window.closeCarrosselModal === 'function') { window.closeCarrosselModal(); } else { console.error('closeCarrosselModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('carrosselModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Criar/Editar Carrossel M√©dio -->
    <div id="carrosselMedioModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="carrosselMedioModalTitle">Novo Item</h2>
                <button type="button" class="modal-close" id="closeCarrosselMedioModal" onclick="if(typeof window.closeCarrosselMedioModal === 'function') { window.closeCarrosselMedioModal(); } else { console.error('closeCarrosselMedioModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('carrosselMedioModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">&times;</button>
            </div>
            <form id="carrosselMedioForm" onsubmit="event.preventDefault(); if(typeof handleSaveCarrosselMedio === 'function') { handleSaveCarrosselMedio(event); } else if(typeof window.handleSaveCarrosselMedio === 'function') { window.handleSaveCarrosselMedio(event); } else { console.error('handleSaveCarrosselMedio n√£o est√° dispon√≠vel!'); } return false;">
                <input type="hidden" id="carrosselMedioId">
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="carrosselMedioOrdem">Ordem</label>
                        <input type="number" id="carrosselMedioOrdem" name="ordem" min="1">
                    </div>
                    <div class="form-group">
                        <label for="carrosselMedioAtivo">Status</label>
                        <select id="carrosselMedioAtivo" name="ativo">
                            <option value="true">Ativo</option>
                            <option value="false">Inativo</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="carrosselMedioImagem">Imagem *</label>
                    <input type="file" id="carrosselMedioImagem" name="materia" accept="image/*">
                    <small class="form-help">A imagem ser√° exibida no carrossel m√©dio (recomendado: 800x600px)</small>
                    <div id="carrosselMedioImagemPreview" class="image-preview"></div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelCarrosselMedioBtn" onclick="if(typeof window.closeCarrosselMedioModal === 'function') { window.closeCarrosselMedioModal(); } else { console.error('closeCarrosselMedioModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('carrosselMedioModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Criar/Editar Respons√°vel -->
    <div id="responsavelModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="responsavelModalTitle">Novo Respons√°vel</h2>
                <button type="button" class="modal-close" id="closeResponsavelModal" onclick="if(typeof window.closeResponsavelModal === 'function') { window.closeResponsavelModal(); } else { console.error('closeResponsavelModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('responsavelModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">&times;</button>
            </div>
            <form id="responsavelForm" onsubmit="event.preventDefault(); if(typeof handleSaveResponsavel === 'function') { handleSaveResponsavel(event); } else if(typeof window.handleSaveResponsavel === 'function') { window.handleSaveResponsavel(event); } else { console.error('handleSaveResponsavel n√£o est√° dispon√≠vel!'); } return false;">
                <input type="hidden" id="responsavelId">
                
                <div class="form-group">
                    <label for="responsavelNome">Nome *</label>
                    <input type="text" id="responsavelNome" name="nome" required>
                </div>

                <div class="form-group">
                    <label for="responsavelCargo">Cargo *</label>
                    <input type="text" id="responsavelCargo" name="cargo" required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="responsavelOrdem">Ordem</label>
                        <input type="number" id="responsavelOrdem" name="ordem" min="1">
                    </div>
                    <div class="form-group">
                        <label for="responsavelAtivo">Status</label>
                        <select id="responsavelAtivo" name="ativo">
                            <option value="true">Ativo</option>
                            <option value="false">Inativo</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="responsavelImagem">Foto</label>
                    <input type="file" id="responsavelImagem" name="imagem" accept="image/*">
                    <small class="form-help">A foto ser√° exibida no perfil do respons√°vel</small>
                    <div id="responsavelImagemPreview" class="image-preview"></div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelResponsavelBtn" onclick="if(typeof window.closeResponsavelModal === 'function') { window.closeResponsavelModal(); } else { console.error('closeResponsavelModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('responsavelModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Criar/Editar FAQ -->
    <div id="faqModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="faqModalTitle">Nova Pergunta</h2>
                <button type="button" class="modal-close" id="closeFaqModal" onclick="if(typeof window.closeFaqModal === 'function') { window.closeFaqModal(); } else { console.error('closeFaqModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('faqModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">&times;</button>
            </div>
            <form id="faqForm" onsubmit="event.preventDefault(); if(typeof handleSaveFAQ === 'function') { handleSaveFAQ(event); } else if(typeof window.handleSaveFAQ === 'function') { window.handleSaveFAQ(event); } else { console.error('handleSaveFAQ n√£o est√° dispon√≠vel!'); } return false;">
                <input type="hidden" id="faqId">
                
                <div class="form-group">
                    <label for="faqPergunta">Pergunta *</label>
                    <input type="text" id="faqPergunta" name="pergunta" required>
                </div>

                <div class="form-group">
                    <label for="faqResposta">Resposta *</label>
                    <textarea id="faqResposta" name="resposta" rows="6" required></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="faqOrdem">Ordem</label>
                        <input type="number" id="faqOrdem" name="ordem" min="1">
                    </div>
                    <div class="form-group">
                        <label for="faqAtivo">Status</label>
                        <select id="faqAtivo" name="ativo">
                            <option value="true">Ativo</option>
                            <option value="false">Inativo</option>
                        </select>
                    </div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelFaqBtn" onclick="if(typeof window.closeFaqModal === 'function') { window.closeFaqModal(); } else { console.error('closeFaqModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('faqModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Criar/Editar Site -->
    <div id="siteModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="siteModalTitle">Novo Site</h2>
                <button type="button" class="modal-close" id="closeSiteModal" onclick="if(typeof window.closeSiteModal === 'function') { window.closeSiteModal(); } else { console.error('closeSiteModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('siteModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">&times;</button>
            </div>
            <form id="siteForm">
                <input type="hidden" id="siteId">
                
                <div class="form-group">
                    <label for="siteNome">Nome *</label>
                    <input type="text" id="siteNome" name="nome" required>
                </div>

                <div class="form-group">
                    <label for="siteUrl">URL *</label>
                    <input type="url" id="siteUrl" name="url" required placeholder="https://example.com">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="siteOrdem">Ordem</label>
                        <input type="number" id="siteOrdem" name="ordem" min="1">
                    </div>
                    <div class="form-group">
                        <label for="siteAtivo">Status</label>
                        <select id="siteAtivo" name="ativo">
                            <option value="true">Ativo</option>
                            <option value="false">Inativo</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="siteImagem">Logo/Imagem</label>
                    <input type="file" id="siteImagem" name="imagem" accept="image/*">
                    <small class="form-help">A imagem/logo ser√° exibida para o site</small>
                    <div id="siteImagemPreview" class="image-preview"></div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelSiteBtn" onclick="if(typeof window.closeSiteModal === 'function') { window.closeSiteModal(); } else { console.error('closeSiteModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('siteModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Criar/Editar Not√≠cia -->
    <div id="noticiaModal" class="modal hidden">
        <div class="modal-content" style="max-width: 800px; max-height: 90vh; overflow-y: auto;">
            <div class="modal-header">
                <h2 id="noticiaModalTitle">Nova Not√≠cia</h2>
                <button type="button" class="modal-close" id="closeNoticiaModal" onclick="if(typeof window.closeNoticiaModal === 'function') { window.closeNoticiaModal(); } else { console.error('closeNoticiaModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('noticiaModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">&times;</button>
            </div>
            <form id="noticiaForm" onsubmit="event.preventDefault(); if(typeof handleSaveNoticia === 'function') { handleSaveNoticia(event); } else if(typeof window.handleSaveNoticia === 'function') { window.handleSaveNoticia(event); } else { console.error('handleSaveNoticia n√£o est√° dispon√≠vel!'); } return false;">
                <input type="hidden" id="noticiaId">
                
                <div class="form-group">
                    <label for="noticiaTitle">T√≠tulo *</label>
                    <input type="text" id="noticiaTitle" name="title" required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="noticiaDate">Data</label>
                        <input type="date" id="noticiaDate" name="date">
                    </div>
                    <div class="form-group">
                        <label for="noticiaCategory">Categoria</label>
                        <select id="noticiaCategory" name="category">
                            <option value="Espiritualidade">Espiritualidade</option>
                            <option value="Maanaim">Maanaim</option>
                            <option value="Popular">Popular</option>
                            <option value="geral">Geral</option>
                            <option value="tecnologia">Tecnologia</option>
                            <option value="politica">Pol√≠tica</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="noticiaExcerpt">Resumo/Excerpt</label>
                    <textarea id="noticiaExcerpt" name="excerpt" rows="3" placeholder="Breve descri√ß√£o da not√≠cia que aparecer√° na lista"></textarea>
                </div>

                <div class="form-group">
                    <label for="noticiaContent">Conte√∫do (HTML/CSS) *</label>
                    <div class="html-editor-wrapper">
                        <div class="editor-toolbar">
                            <button type="button" class="toolbar-btn" onclick="insertHTMLTag('h1', 'T√≠tulo Principal')" title="T√≠tulo H1">
                                <i class='bx bx-heading'></i> H1
                            </button>
                            <button type="button" class="toolbar-btn" onclick="insertHTMLTag('h2', 'Subt√≠tulo')" title="T√≠tulo H2">
                                <i class='bx bx-heading'></i> H2
                            </button>
                            <button type="button" class="toolbar-btn" onclick="insertHTMLTag('p', 'Par√°grafo')" title="Par√°grafo">
                                <i class='bx bx-text'></i> P
                            </button>
                            <button type="button" class="toolbar-btn" onclick="insertHTMLTag('strong', 'Texto em Negrito')" title="Negrito">
                                <i class='bx bx-bold'></i> B
                            </button>
                            <button type="button" class="toolbar-btn" onclick="insertHTMLTag('em', 'Texto em It√°lico')" title="It√°lico">
                                <i class='bx bx-italic'></i> I
                            </button>
                            <button type="button" class="toolbar-btn" onclick="insertHTMLTag('ul', 'Lista')" title="Lista">
                                <i class='bx bx-list-ul'></i> Lista
                            </button>
                            <button type="button" class="toolbar-btn" onclick="openImageUploadModal()" title="Inserir Imagem">
                                <i class='bx bx-image'></i> Imagem
                            </button>
                            <button type="button" class="toolbar-btn" onclick="insertHTMLTag('style', '/* Seus estilos CSS aqui */')" title="CSS">
                                <i class='bx bx-code-alt'></i> CSS
                            </button>
                            <button type="button" class="toolbar-btn" onclick="previewHTMLContent()" title="Visualizar">
                                <i class='bx bx-show'></i> Visualizar
                            </button>
                        </div>
                        <textarea id="noticiaContent" name="content" rows="15" required placeholder="Digite ou cole seu HTML aqui. Use os bot√µes acima para inserir tags comuns." style="font-family: 'Courier New', monospace; font-size: 14px; line-height: 1.5;"></textarea>
                        <small class="form-help" style="margin-top: 8px; display: block;">
                            üí° Dica: Voc√™ pode usar HTML completo, incluindo &lt;img&gt;, &lt;figure&gt;, &lt;style&gt;, etc. O conte√∫do ser√° renderizado exatamente como voc√™ escrever.
                        </small>
                    </div>
                </div>
                
                <!-- Modal para Upload de Imagens -->
                <div id="imageUploadModal" class="modal hidden">
                    <div class="modal-content" style="max-width: 600px;">
                        <div class="modal-header">
                            <h2>Inserir Imagem</h2>
                            <button type="button" class="modal-close" onclick="closeImageUploadModal()">&times;</button>
                        </div>
                        <div class="form-group">
                            <label for="contentImageUpload">Selecione uma ou mais imagens</label>
                            <input type="file" id="contentImageUpload" name="images" accept="image/*" multiple>
                            <small class="form-help">Voc√™ pode selecionar m√∫ltiplas imagens de uma vez</small>
                        </div>
                        <div id="imageUploadPreview" style="margin-top: 16px; display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 12px;"></div>
                        <div class="modal-actions">
                            <button type="button" class="btn btn-secondary" onclick="closeImageUploadModal()">Cancelar</button>
                            <button type="button" class="btn btn-primary" onclick="insertUploadedImages()">Inserir no Conte√∫do</button>
                        </div>
                    </div>
                </div>
                
                <!-- Modal de Preview -->
                <div id="htmlPreviewModal" class="modal hidden">
                    <div class="modal-content" style="max-width: 900px; max-height: 90vh; overflow-y: auto;">
                        <div class="modal-header">
                            <h2>Visualiza√ß√£o do Conte√∫do</h2>
                            <button type="button" class="modal-close" onclick="closeHTMLPreview()">&times;</button>
                        </div>
                        <div id="htmlPreviewContent" style="padding: 20px; background: #fff; border-radius: 8px; min-height: 200px;">
                            <!-- Preview ser√° inserido aqui -->
                        </div>
                        <div class="modal-actions">
                            <button type="button" class="btn btn-secondary" onclick="closeHTMLPreview()">Fechar</button>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="noticiaTag">Tag</label>
                    <input type="text" id="noticiaTag" name="tag" placeholder="Tags separadas por v√≠rgula">
                </div>

                <div class="form-group">
                    <label for="noticiaImage">Imagem</label>
                    <input type="file" id="noticiaImage" name="image" accept="image/*">
                    <small class="form-help">A imagem ser√° exibida na lista de not√≠cias</small>
                    <div id="noticiaImagePreview" class="image-preview"></div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelNoticiaBtn" onclick="if(typeof window.closeNoticiaModal === 'function') { window.closeNoticiaModal(); } else { console.error('closeNoticiaModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('noticiaModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Criar/Editar Colunista -->
    <div id="colunistaModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="colunistaModalTitle">Novo Colunista</h2>
                <button type="button" class="modal-close" id="closeColunistaModal" onclick="if(typeof window.closeColunistaModal === 'function') { window.closeColunistaModal(); } else { console.error('closeColunistaModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('colunistaModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">&times;</button>
            </div>
            <form id="colunistaForm" onsubmit="event.preventDefault(); if(typeof handleSaveColunista === 'function') { handleSaveColunista(event); } else if(typeof window.handleSaveColunista === 'function') { window.handleSaveColunista(event); } else { console.error('handleSaveColunista n√£o est√° dispon√≠vel!'); } return false;">
                <input type="hidden" id="colunistaId">
                
                <div class="form-group">
                    <label for="colunistaNome">Nome do Colunista *</label>
                    <input type="text" id="colunistaNome" name="nome" required placeholder="Ex: Bispo Rodrigo de Carvalho">
                </div>

                <div class="form-group">
                    <label for="colunistaColuna">Nome da Coluna *</label>
                    <input type="text" id="colunistaColuna" name="coluna" required placeholder="Ex: CULTURA DO REINO">
                    <small class="form-help">Nome que aparecer√° na caixa azul do card</small>
                </div>

                <div class="form-group">
                    <label for="colunistaConteudo">Conte√∫do da Mat√©ria *</label>
                    <textarea id="colunistaConteudo" name="conteudo" rows="10" required placeholder="Texto completo da mat√©ria do colunista"></textarea>
                    <small class="form-help">Texto que ser√° exibido no card do colunista</small>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="colunistaInstagram">Instagram</label>
                        <input type="text" id="colunistaInstagram" name="instagram" placeholder="Ex: @instagram_handle">
                    </div>
                    <div class="form-group">
                        <label for="colunistaOrdem">Ordem</label>
                        <input type="number" id="colunistaOrdem" name="ordem" min="1" value="0">
                        <small class="form-help">Ordem de exibi√ß√£o (menor n√∫mero aparece primeiro)</small>
                    </div>
                </div>

                <div class="form-group">
                    <label for="colunistaAtivo">Status</label>
                    <select id="colunistaAtivo" name="ativo">
                        <option value="true">Ativo</option>
                        <option value="false">Inativo</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="colunistaImagem">Imagem do Colunista</label>
                    <input type="file" id="colunistaImagem" name="imagem" accept="image/*">
                    <small class="form-help">Foto do colunista que ser√° exibida no card</small>
                    <div id="colunistaImagemPreview" class="image-preview"></div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelColunistaBtn" onclick="if(typeof window.closeColunistaModal === 'function') { window.closeColunistaModal(); } else { console.error('closeColunistaModal n√£o est√° dispon√≠vel!'); const modal = document.getElementById('colunistaModal'); if(modal) { modal.classList.add('hidden'); modal.style.display = 'none'; } }">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner"></div>
    </div>

    <script>
        // For√ßar recarregamento dos arquivos
        const timestamp = Date.now();
        console.log('üìù Carregando app.js...');
        
        const script = document.createElement('script');
        script.src = `/dashboard/js/app.js?v=31.0&t=${timestamp}`;
        script.type = 'text/javascript';
        script.async = false; // Carregar de forma s√≠ncrona para garantir ordem
        script.defer = false; // N√£o usar defer para garantir execu√ß√£o imediata
        
        script.onload = function() {
            console.log('‚úÖ app.js carregado com sucesso!');
            
            // Verificar IMEDIATAMENTE se handleLogin est√° dispon√≠vel
            function checkHandleLogin() {
                if (typeof window.handleLogin === 'function') {
                    console.log('‚úÖ window.handleLogin est√° dispon√≠vel!');
                    return true;
                } else if (typeof handleLogin === 'function') {
                    console.log('‚úÖ handleLogin est√° dispon√≠vel sem window - tornando global');
                    window.handleLogin = handleLogin;
                    return true;
                }
                return false;
            }
            
            // Verificar imediatamente
            if (!checkHandleLogin()) {
                // Se n√£o estiver dispon√≠vel, tentar novamente ap√≥s um pequeno delay
                let checkCount = 0;
                const maxChecks = 5;
                
                const retryCheck = () => {
                    checkCount++;
                    if (checkHandleLogin()) {
                        return;
                    } else if (checkCount < maxChecks) {
                        console.log('‚è≥ handleLogin ainda n√£o dispon√≠vel, tentando novamente em 200ms... (tentativa ' + checkCount + '/' + maxChecks + ')');
                        setTimeout(retryCheck, 200);
                    } else {
                        console.error('‚ùå handleLogin N√ÉO est√° dispon√≠vel ap√≥s ' + maxChecks + ' tentativas!');
                        console.error('Isso indica um erro no carregamento ou execu√ß√£o do app.js');
                        console.error('Verifique o console para erros de JavaScript');
                        // Criar um fallback b√°sico
                        window.handleLogin = function(e) {
                            alert('Erro: Fun√ß√£o de login n√£o foi carregada. Verifique o console do navegador (F12) para erros de JavaScript.');
                            console.error('handleLogin fallback - fun√ß√£o n√£o foi carregada corretamente');
                        };
                    }
                };
                
                setTimeout(retryCheck, 100);
            }
        };
        
        script.onerror = function() {
            console.error('‚ùå Erro ao carregar app.js!');
            alert('Erro ao carregar o JavaScript. Verifique se o servidor est√° rodando na porta 3000.');
        };
        
        document.head.appendChild(script);
        
        // Garantir que os campos de login estejam sempre habilitados (executar periodicamente)
        setInterval(function() {
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');
            
            if (emailInput) {
                emailInput.removeAttribute('readonly');
                emailInput.removeAttribute('disabled');
                emailInput.style.pointerEvents = 'auto';
                emailInput.style.userSelect = 'text';
            }
            
            if (passwordInput) {
                passwordInput.removeAttribute('readonly');
                passwordInput.removeAttribute('disabled');
                passwordInput.style.pointerEvents = 'auto';
                passwordInput.style.userSelect = 'text';
            }
            
            // Remover qualquer overlay que possa estar bloqueando
            const loadingOverlays = document.querySelectorAll('.loading-overlay:not(.hidden)');
            if (loadingOverlays.length > 0 && document.getElementById('loginScreen') && !document.getElementById('loginScreen').classList.contains('hidden')) {
                loadingOverlays.forEach(overlay => {
                    overlay.classList.add('hidden');
                    overlay.style.display = 'none';
                    overlay.style.pointerEvents = 'none';
                });
            }
        }, 500);
    </script>
    
    <!-- Scripts para Editor HTML -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/xml/xml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/htmlmixed/htmlmixed.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/css/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
    
    <script>
        // Vari√°veis globais para o editor
        let contentEditor = null;
        let uploadedImages = [];
        
        // Inicializar CodeMirror quando o modal for aberto
        function initHTMLEditor() {
            const textarea = document.getElementById('noticiaContent');
            if (textarea && !contentEditor) {
                contentEditor = CodeMirror.fromTextArea(textarea, {
                    mode: 'htmlmixed',
                    theme: 'default',
                    lineNumbers: true,
                    lineWrapping: true,
                    indentUnit: 2,
                    tabSize: 2,
                    autoCloseTags: true,
                    matchTags: true,
                    foldGutter: true,
                    gutters: ['CodeMirror-linenumbers', 'CodeMirror-foldgutter']
                });
                
                contentEditor.setSize('100%', '400px');
                console.log('‚úÖ Editor HTML inicializado');
            }
        }
        
        // Fun√ß√£o para inserir tags HTML
        window.insertHTMLTag = function(tag, placeholder) {
            if (!contentEditor) {
                const textarea = document.getElementById('noticiaContent');
                if (textarea) {
                    const cursorPos = textarea.selectionStart;
                    const text = textarea.value;
                    let insertText = '';
                    
                    switch(tag) {
                        case 'h1':
                            insertText = `<h1>${placeholder}</h1>\n\n`;
                            break;
                        case 'h2':
                            insertText = `<h2>${placeholder}</h2>\n\n`;
                            break;
                        case 'p':
                            insertText = `<p>${placeholder}</p>\n\n`;
                            break;
                        case 'strong':
                            insertText = `<strong>${placeholder}</strong>`;
                            break;
                        case 'em':
                            insertText = `<em>${placeholder}</em>`;
                            break;
                        case 'ul':
                            insertText = `<ul>\n  <li>Item 1</li>\n  <li>Item 2</li>\n</ul>\n\n`;
                            break;
                        case 'style':
                            insertText = `<style>\n  /* ${placeholder} */\n  .minha-classe {\n    color: #000;\n  }\n</style>\n\n`;
                            break;
                    }
                    
                    const newText = text.substring(0, cursorPos) + insertText + text.substring(cursorPos);
                    textarea.value = newText;
                    textarea.focus();
                    textarea.setSelectionRange(cursorPos + insertText.length, cursorPos + insertText.length);
                }
            } else {
                const cursor = contentEditor.getCursor();
                let insertText = '';
                
                switch(tag) {
                    case 'h1':
                        insertText = `<h1>${placeholder}</h1>\n\n`;
                        break;
                    case 'h2':
                        insertText = `<h2>${placeholder}</h2>\n\n`;
                        break;
                    case 'p':
                        insertText = `<p>${placeholder}</p>\n\n`;
                        break;
                    case 'strong':
                        insertText = `<strong>${placeholder}</strong>`;
                        break;
                    case 'em':
                        insertText = `<em>${placeholder}</em>`;
                        break;
                    case 'ul':
                        insertText = `<ul>\n  <li>Item 1</li>\n  <li>Item 2</li>\n</ul>\n\n`;
                        break;
                    case 'style':
                        insertText = `<style>\n  /* ${placeholder} */\n  .minha-classe {\n    color: #000;\n  }\n</style>\n\n`;
                        break;
                }
                
                contentEditor.replaceRange(insertText, cursor);
                contentEditor.focus();
            }
        };
        
        // Fun√ß√£o para abrir modal de upload de imagens
        window.openImageUploadModal = function() {
            const modal = document.getElementById('imageUploadModal');
            if (modal) {
                modal.classList.remove('hidden');
                document.getElementById('contentImageUpload').value = '';
                uploadedImages = [];
                document.getElementById('imageUploadPreview').innerHTML = '';
            }
        };
        
        // Fun√ß√£o para fechar modal de upload
        window.closeImageUploadModal = function() {
            const modal = document.getElementById('imageUploadModal');
            if (modal) {
                modal.classList.add('hidden');
            }
        };
        
        // Processar upload de imagens
        document.addEventListener('DOMContentLoaded', function() {
            const imageInput = document.getElementById('contentImageUpload');
            if (imageInput) {
                imageInput.addEventListener('change', function(e) {
                    const files = Array.from(e.target.files);
                    const preview = document.getElementById('imageUploadPreview');
                    preview.innerHTML = '';
                    uploadedImages = [];
                    
                    files.forEach((file, index) => {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const imgData = {
                                file: file,
                                dataUrl: e.target.result,
                                name: file.name
                            };
                            uploadedImages.push(imgData);
                            
                            const imgDiv = document.createElement('div');
                            imgDiv.style.cssText = 'position: relative; border: 2px solid #e2e8f0; border-radius: 8px; overflow: hidden;';
                            imgDiv.innerHTML = `
                                <img src="${e.target.result}" style="width: 100%; height: 150px; object-fit: cover; display: block;">
                                <div style="padding: 8px; background: #f8fafc; font-size: 12px; color: #64748b; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;">
                                    ${file.name}
                                </div>
                            `;
                            preview.appendChild(imgDiv);
                        };
                        reader.readAsDataURL(file);
                    });
                });
            }
        });
        
        // Fun√ß√£o para inserir imagens no conte√∫do
        window.insertUploadedImages = async function() {
            if (uploadedImages.length === 0) {
                showToast('Selecione pelo menos uma imagem', 'error');
                return;
            }
            
            // Upload das imagens para o servidor (uma por vez para garantir que todas sejam processadas)
            const imageUrls = [];
            
            try {
                showToast(`Enviando ${uploadedImages.length} imagem(ns)...`, 'info');
                
                // Fazer upload de cada imagem individualmente
                for (let i = 0; i < uploadedImages.length; i++) {
                    const img = uploadedImages[i];
                    const formData = new FormData();
                    formData.append('materia', img.file);
                    
                    console.log(`üì§ Enviando imagem ${i + 1}/${uploadedImages.length}:`, img.file.name);
                    
                    const response = await fetch('/api/site/upload-materia', {
                        method: 'POST',
                        credentials: 'include',
                        body: formData
                    });
                    
                    if (!response.ok) {
                        const errorData = await response.json().catch(() => ({ error: 'Erro desconhecido' }));
                        throw new Error(errorData.error || `Erro ao fazer upload da imagem ${i + 1}`);
                    }
                    
                    const data = await response.json();
                    console.log('üì• Resposta do upload:', data);
                    
                    // Suportar diferentes formatos de resposta
                    let url = null;
                    if (data.url) {
                        url = data.url;
                    } else if (data.image) {
                        url = Array.isArray(data.image) ? data.image[0] : data.image;
                    } else if (data.images && data.images.length > 0) {
                        url = data.images[0];
                    } else if (data.urls && data.urls.length > 0) {
                        url = data.urls[0];
                    }
                    
                    if (url) {
                        imageUrls.push(url);
                        console.log(`‚úÖ Imagem ${i + 1} enviada:`, url);
                    } else {
                        console.warn('‚ö†Ô∏è Formato de resposta inesperado:', data);
                    }
                }
                
                if (imageUrls.length === 0) {
                    throw new Error('Nenhuma imagem foi enviada com sucesso');
                }
                
                // Inserir tags <img> no editor
                let imgTags = '';
                imageUrls.forEach((url, index) => {
                    const imgTag = `<figure style="margin: 20px 0;">
  <img src="${url}" alt="Imagem ${index + 1}" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
  <figcaption style="margin-top: 8px; font-size: 14px; color: #64748b; text-align: center; font-style: italic;">Legenda da imagem ${index + 1}</figcaption>
</figure>\n\n`;
                    imgTags += imgTag;
                });
                
                if (contentEditor) {
                    const cursor = contentEditor.getCursor();
                    contentEditor.replaceRange(imgTags, cursor);
                    contentEditor.focus();
                } else {
                    const textarea = document.getElementById('noticiaContent');
                    if (textarea) {
                        const cursorPos = textarea.selectionStart;
                        const text = textarea.value;
                        const newText = text.substring(0, cursorPos) + imgTags + text.substring(cursorPos);
                        textarea.value = newText;
                        textarea.focus();
                    }
                }
                
                closeImageUploadModal();
                showToast(`${imageUrls.length} imagem(ns) inserida(s) com sucesso!`, 'success');
            } catch (error) {
                console.error('‚ùå Erro ao fazer upload:', error);
                showToast('Erro ao fazer upload das imagens: ' + error.message, 'error');
            }
        };
        
        // Fun√ß√£o para visualizar HTML
        window.previewHTMLContent = function() {
            const content = contentEditor ? contentEditor.getValue() : document.getElementById('noticiaContent').value;
            const previewDiv = document.getElementById('htmlPreviewContent');
            const modal = document.getElementById('htmlPreviewModal');
            
            if (previewDiv && modal) {
                previewDiv.innerHTML = content;
                modal.classList.remove('hidden');
            }
        };
        
        window.closeHTMLPreview = function() {
            const modal = document.getElementById('htmlPreviewModal');
            if (modal) {
                modal.classList.add('hidden');
            }
        };
        
        // Modificar openNoticiaModal para inicializar o editor
        const originalOpenNoticiaModal = window.openNoticiaModal;
        if (typeof originalOpenNoticiaModal === 'function') {
            window.openNoticiaModal = function(noticia) {
                originalOpenNoticiaModal(noticia);
                setTimeout(() => {
                    initHTMLEditor();
                    if (noticia && noticia.content) {
                        if (contentEditor) {
                            contentEditor.setValue(noticia.content);
                        }
                    }
                }, 100);
            };
        }
    </script>
</body>
</html>
